.container-method [id="method-braintree"]
  .wrapper-module
    p.hint-text Card info
    .wrapper-payments-methods
      = fa_icon "cc-visa"
      = fa_icon "cc-mastercard"
      = fa_icon "cc-amex"
    = form_tag event_order_payment_service_synchronous_payments_path(order_presenter.event, order_presenter.order, order_presenter.payment_service), method: :post, id: "braintree-payment-form", class: "basic-grey"
      #paypal-container
      .payment-errors
      .control-group
        .controls
          = label_tag :card_number, t('orders.stripe.card_number'), required: true
          #card_number
        .controls
          = label_tag :card_verification, t('orders.stripe.card_code_verification'), required: true
          #card_verification

          = label_tag :expiration_month, t('orders.stripe.card_expiration_date'), required: true, class: "expiration-label"
          #expiration_month [selector="yes"]
          = label_tag :expiration_year, t('orders.stripe.card_expiration_date'), required: true, class: "expiration-label"
          #expiration_year [selector="yes"]
        .actions
          = submit_tag t('orders.button'), class: "btn btn-action btn-action-primary"

  javascript:
    if( $("#braintree-payment-form").length > 0 ) {
      var clientToken = '#{order_presenter.form_data.client_token}';
      braintree.setup(clientToken, "custom", {
        id: "braintree-payment-form",
        hostedFields: {
          number: {
            selector: "#card_number"
          },
          cvv: {
            selector: "#card_verification"
          },
          expirationMonth: {
            selector: "#expiration_month"
          },
          expirationYear: {
            selector: "#expiration_year"
          },
          styles: {
          // Style all elements
            "input": {
              "border-bottom": "1px solid red !important",
              "color": "red"
            },

            ":focus": {
              "color": "blue"
            },
          },
        },
        paypal: {
          container: "paypal-container",
        },
        onFieldEvent: function (payload) {
          $cardNumberContainer.removeClass('visa master-card discover jcb american-expres diners-club maestro');

          if (payload.card) {
            $cardNumberContainer.addClass(card.type);
          }
        }
      });
    }