.content-grid.mdl-grid
  .mdl-cell.mdl-cell--8-col
    .mdl-card__title-text = title
.mdl-card__supporting-text
  .report_chart id=chart_id

javascript:
  $(document).ready(function() {
    var data = JSON.parse("#{escape_javascript(data.html_safe)}");
    var cols = JSON.parse("#{escape_javascript(cols.to_json.html_safe)}");
    var rows = JSON.parse("#{escape_javascript(rows.to_json.html_safe)}");
    var metric = JSON.parse("#{escape_javascript(metric.to_json.html_safe)}");
    var decimals = #{decimals};
    var title = "#{title}";
    var chartId = "#"+"#{chart_id}";
    var renderers = $.extend($.pivotUtilities.renderers, $.pivotUtilities.export_renderers,  $.pivotUtilities.c3_renderers);
    var sum = $.pivotUtilities.aggregatorTemplates.sum;
    var frFormat = $.pivotUtilities.numberFormat({digitsAfterDecimal: decimals});
    var type = "#{type}"
    var show = null

    setPivotTable(data, rows, cols, metric, decimals, chartId, title, renderers, sum, frFormat, type, show);

  });
