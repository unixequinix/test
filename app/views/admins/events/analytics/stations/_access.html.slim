.content-grid.mdl-grid
  .mdl-layout-spacer
  .mdl-cell.mdl-cell--12-col
    .mdl-grid
      .mdl-cell.mdl-cell--6-col
        .customer-card.mdl-card.mdl-shadow--2dp
          .mdl-card__supporting-text
            = render "admins/events/analytics/stations/report_card", title: "Access Control for Customers in #{station.name}", chart_id: "access_control_customer"
      .mdl-cell.mdl-cell--6-col
        .customer-card.mdl-card.mdl-shadow--2dp
          .mdl-card__supporting-text
            = render "admins/events/analytics/stations/report_card", title: "Access Control for Staff in #{station.name}", chart_id: "access_control_operator"
  .mdl-layout-spacer
javascript:
    $(function () {
        var renderers = $.extend($.pivotUtilities.renderers, $.pivotUtilities.c3_renderers, $.pivotUtilities.export_renderers);
        var tpl = $.pivotUtilities.aggregatorTemplates;
        var numberFormat = $.pivotUtilities.numberFormat;
        var frFormat = numberFormat({digitsAfterDecimal: 0});

        var access_control_customer = jQuery.parseJSON('#{ escape_javascript(access_control_customer.html_safe) }');

        $("#access_control_customer").pivotUI(access_control_customer, {
            renderers: renderers,
            cols:["Station Name", "Direction"], rows: ["Event Day", "Date Time"],
            rendererName: "Table",
            aggregators: {
                "Access": function () {
                    return tpl.sum(frFormat)(["Access"])}
                }

        });

        var access_control_operator = jQuery.parseJSON('#{ escape_javascript(access_control_operator.html_safe) }');

        $("#access_control_operator").pivotUI(access_control_operator, {
            renderers: renderers,
            cols:["Station Name", "Direction"], rows: ["Event Day", "Date Time"],
            rendererName: "Table",
            aggregators: {
                "Access": function () {
                    return tpl.sum(frFormat)(["Access"])}
                }

        });

    });
